{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/editor/editor.js","webpack:///./src/editor/toolbar.js","webpack:///./src/index.js","webpack:///./src/index.scss","webpack:///./src/plugins sync ^\\.\\/.*$","webpack:///./src/plugins/drop.js","webpack:///./src/plugins/emoji-transform-editor-plugin.js","webpack:///./src/plugins/inline-image-upload-plugin.js","webpack:///./src/plugins/registry.js","webpack:///./src/plugins/selection.js","webpack:///./src/store/editor-store.js","webpack:///./src/store/events.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/editor/editor-api.js"],"names":["Editor","editorNode","config","mutationList","observer","console","log","forEach","mutation","type","data","Object","keys","registry","pluginKey","path","pl","require","push","e","node","eventsAndCbs","event","global","document","addEventListener","name","handler","dispatchEvent","methods","onChange","restoreSelection","currentSelection","window","getSelection","sel","getRangeAt","rangeCount","selection","createRange","range","removeAllRanges","addRange","select","method","args","runPlugins","_plugins","plugin","_editor","editorApi","getPlugins","_toolbar","toolbar","toolbarOptions","get","_observer","MutationObserver","_mutationOberserverCb","observe","childList","attributes","subtree","mount","events","subscribe","parentNode","createElement","classList","add","contentEditableNode","contentEditable","onInputChange","_attachEvents","options","func","status","opt","innerHTML","srcElement","dataset","callback","appendChild","editorRef","_editorNode","bold","image","focusEditor","getElementById","editor","value","dropEditorPlugin","stopPropagation","preventDefault","emojiTransformEditorPlugin","dom","inlineImageUploadPlugin","files","dataTransfer","length","content","reader","FileReader","onload","addCustomTag","buildAnchorTag","url","target","result","text","readAsDataURL","drop","selectionEditorPlugin","saveSelection","editorStore","topics","hOP","hasOwnProperty","topic","listener","call","index","remove","publish","info","item","undefined","focusNode","focusNodeOffset","focus","saveFocusNode","focusNodeFn","focusOffset","setPosition","_resetFocusNode","componentKey","props","replacePlaceholder","insertHTML","tag","color","_ec","htmlString","html","selectInsertion","execCommand","Error"],"mappings":"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","file":"js/main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import editorApi from \"../utils/editor/editor-api\";\nimport plugins from \"../plugins/registry\";\nimport events from \"../store/events\";\nimport toolbar from \"./toolbar\";\nimport store from \"../store/editor-store\";\nimport registry from \"../plugins/registry\";\n\nclass Editor {\n  constructor(editorNode, config) {\n    this._editor = new editorApi(editorNode);\n    this._plugins = this.getPlugins();\n    // Config for toolbar\n    this._toolbar = new toolbar(editorNode, this._editor);\n    this.toolbarOptions = this._toolbar.get();\n\n    // setup mutation observer\n    this._observer = new MutationObserver(this._mutationOberserverCb);\n    this._observer.observe(editorNode, {\n      childList: true,\n      attributes: true,\n      subtree: true //Omit or set to false to observe only changes to the parent node.\n    });\n\n    // All events are here\n    this.eventsAndCbs = [\n      { name: \"blur\", handler: \"onFocusLost\" },\n      { name: \"selectionchange\", handler: \"onSelect\", global: true },\n      { name: \"focus\", handler: \"onFocus\" },\n      { name: \"keyup\", handler: \"onKeyup\" },\n      { name: \"keydown\", handler: \"onKeydown\" },\n      { name: \"drop\", handler: \"onDrop\" },\n      { name: \"dragover\", handler: \"onDragOver\" }\n    ];\n\n    this.mount(editorNode);\n\n    events.subscribe(\"changed\", () => {\n      console.log(\"content changed\");\n    });\n\n    this.methods = {};\n    this.methods.onChange = config.onChange;\n  }\n\n  _mutationOberserverCb = (mutationList, observer) => {\n    console.log(\"callback\", mutationList);\n    mutationList.forEach(mutation => {\n      switch (mutation.type) {\n        case \"childList\":\n          /* One or more children have been added to and/or removed\n             from the tree; see mutation.addedNodes and\n             mutation.removedNodes */\n          break;\n        case \"attributes\":\n          /* An attribute value changed on the element in\n             mutation.target; the attribute name is in\n             mutation.attributeName and its previous value is in\n             mutation.oldValue */\n          break;\n      }\n    });\n  };\n\n  mount(editorNode) {\n    const parentNode = document.createElement(\"div\");\n    parentNode.classList.add(\"parent\");\n    const contentEditableNode = document.createElement(\"div\");\n    contentEditableNode.classList.add(\"vanillajs-editor\");\n\n    const toolbar = document.createElement(\"div\");\n    toolbar.classList.add(\"editor-toolbar\");\n    contentEditableNode.contentEditable = true;\n\n    contentEditableNode.addEventListener(\"input\", this.onInputChange, false);\n\n    this._attachEvents(contentEditableNode);\n\n    const options = [];\n    for (let func in this.toolbarOptions) {\n      if (this.toolbarOptions[func].status) {\n        const opt = this.toolbarOptions[func];\n        options.push(`<li data-name=\"${func}\">${opt.name}</li>`);\n      }\n    }\n    toolbar.innerHTML = `<ul style=\"list-style:none\">\n      ${options}\n    </ul>\n    `;\n\n    toolbar.addEventListener(\n      \"focusout\",\n      event => {\n        console.log(\"clicked blur\", event.srcElement.dataset.name);\n      },\n      false\n    );\n\n    //@TODO remove these events when editor removed from code to stop leakage of memory\n    toolbar.addEventListener(\n      \"click\",\n      event => {\n        //console.log (\"clicked \", event.srcElement.dataset.name);\n        this.toolbarOptions[event.srcElement.dataset.name].callback();\n      },\n      false\n    );\n    parentNode.appendChild(toolbar);\n\n    parentNode.appendChild(contentEditableNode);\n\n    editorNode.appendChild(parentNode);\n  }\n\n  getPlugins = () => {\n    const data = [];\n    Object.keys(registry).forEach(function(pluginKey) {\n      const path = registry[pluginKey];\n      console.log(pluginKey, path);\n\n      try {\n        const pl = require(`../plugins/${path}`).default;\n        if (pl) {\n          data.push(pl);\n        }\n      } catch (e) {\n        // handle error here\n        console.log(e);\n      }\n    });\n\n    return data;\n  };\n\n  _attachEvents = node => {\n    this.eventsAndCbs.forEach(event => {\n      if (event.global) {\n        document.addEventListener(event.name, this[event.handler], false);\n      } else {\n        node.addEventListener(event.name, this[event.handler], false);\n      }\n    });\n  };\n\n  /**\n   * input event is fired when something in an input\n   * or textarea element has changes and it's also fired\n   *  when something has changed in elements with\n   *  contenteditable attribute. Perfect!} value\n   */\n  onInputChange = event => {\n    // run plugins\n    this.dispatchEvent(\"onContentChanged\", event);\n    // call props method\n    this.methods.onChange(event);\n  };\n\n  onFocusLost = e => {\n    this.dispatchEvent(\"onFocusLost\");\n  };\n\n  onFocus = () => {\n    this.restoreSelection(this.currentSelection);\n  };\n\n  onSelect = () => {\n    // implement it\n  };\n\n  onDrop = e => {\n    this.dispatchEvent(\"onDrop\", { event: e });\n  };\n\n  onDragOver = e => {\n    this.dispatchEvent(\"onDragOver\", { event: e });\n  };\n  // move to selection plugin\n  saveSelection = () => {\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        return sel.getRangeAt(0);\n      }\n    } else if (document.selection && document.selection.createRange) {\n      return document.selection.createRange();\n    }\n    return null;\n  };\n\n  // move to selection plugin\n  restoreSelection = range => {\n    if (range) {\n      if (window.getSelection) {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (document.selection && range.select) {\n        range.select();\n      }\n    }\n  };\n\n  dispatchEvent = (method, args) => {\n    this.runPlugins(method, args);\n  };\n\n  // It will run fired methods on all plugins if method exist on them\n  runPlugins = (method, args) => {\n    this._plugins.forEach(plugin => {\n      if (plugin[method]) {\n        plugin[method](this, args);\n      }\n    });\n  };\n}\n\nexport default Editor;\n","class toolbar {\n  constructor(node, editorRef) {\n    this._editorNode = node;\n    this._editor = editorRef;\n  }\n\n  get() {\n    return {\n      bold: {\n        status: true,\n        image: \"\",\n        name: \"B\",\n        callback: () => {\n          this._editor.bold();\n          this._editor.removeAllRanges();\n          this._editor.focusEditor();\n        }\n      }\n    };\n  }\n}\n\nexport default toolbar;\n","import Editor from \"./editor/editor\";\nimport \"./index.scss\";\n\nconst node = document.getElementById(\"local-editor\");\nconst editor = new Editor(node, {\n  onChange: function(value) {\n    //console.log(value);\n  }\n});\n\n// mount the editor on root node\n","// removed by extract-text-webpack-plugin","var map = {\n\t\"./drop\": \"./src/plugins/drop.js\",\n\t\"./drop.js\": \"./src/plugins/drop.js\",\n\t\"./emoji-transform-editor-plugin\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./emoji-transform-editor-plugin.js\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./inline-image-upload-plugin\": \"./src/plugins/inline-image-upload-plugin.js\",\n\t\"./inline-image-upload-plugin.js\": \"./src/plugins/inline-image-upload-plugin.js\",\n\t\"./registry\": \"./src/plugins/registry.js\",\n\t\"./registry.js\": \"./src/plugins/registry.js\",\n\t\"./selection\": \"./src/plugins/selection.js\",\n\t\"./selection.js\": \"./src/plugins/selection.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/plugins sync recursive ^\\\\.\\\\/.*$\";","class dropEditorPlugin {\n  static onDrop(editor, data = {}) {\n    //kill any default behavior\n    data.event.stopPropagation();\n    data.event.preventDefault();\n    // const files = data.event.dataTransfer.files;\n    // // name, size, type inside of files\n    // console.log(files);\n  }\n\n  static onDragOver() {\n    //console.log(\"drag over\");\n  }\n}\n\nexport default dropEditorPlugin;\n","import editor from \"../editor/editor\";\n\nclass emojiTransformEditorPlugin extends editor {\n  static transformToEmojis(editor, args) {\n    // transform here\n  }\n\n  onContentChanged(editor, event) {\n    // do here\n  }\n}\n\nexport default emojiTransformEditorPlugin;\n","import dom from \"../utils/dom\";\nconsole.log(dom);\nclass inlineImageUploadPlugin {\n  static onDrop(editor, data = {}) {\n    //kill any default behavior\n    data.event.stopPropagation();\n    data.event.preventDefault();\n    const files = data.event.dataTransfer.files;\n\n    // name, size, type inside of files\n    console.log(files);\n    if (files.length === 0) {\n      return;\n    }\n\n    console.log(files[0].content);\n    var reader = new FileReader();\n    reader.onload = function(e) {\n      editor._editor.addCustomTag(\n        dom.buildAnchorTag({\n          url: e.target.result,\n          text: files[0].name\n        })\n      );\n    };\n\n    reader.readAsDataURL(files[0]);\n  }\n\n  static onDragOver() {\n    //buildAnchorTag();\n    //console.log(\"drag over\");\n  }\n}\n\nexport default inlineImageUploadPlugin;\n","export default {\n  emojiTransformEditorPlugin: \"emoji-transform-editor-plugin\",\n  selection: \"selection\",\n  drop: \"drop\",\n  inlineImageUploadPlugin: \"inline-image-upload-plugin\"\n};\n","class selectionEditorPlugin {\n  static onFocusLost(editor, data = {}) {\n    const currentSelection = editor.saveSelection();\n    editor.restoreSelection(currentSelection);\n    // then, you loose focus\n  }\n}\n\nexport default selectionEditorPlugin;\n","class editorStore {\n  constructor() {}\n}\n","const events = (function(){\n  var topics = {};\n  var hOP = topics.hasOwnProperty;\n\n  return {\n    subscribe: function(topic, listener) {\n      // Create the topic's object if not yet created\n      if(!hOP.call(topics, topic)) topics[topic] = [];\n\n      // Add the listener to queue\n      var index = topics[topic].push(listener) -1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: function() {\n          delete topics[topic][index];\n        }\n      };\n    },\n    publish: function(topic, info) {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if(!hOP.call(topics, topic)) return;\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach(function(item) {\n      \t\titem(info != undefined ? info : {});\n      });\n    }\n  };\n})();\n\nexport default events;","const buildAnchorTag = function(data) {\n  const { url, text = \"\", target = \"\" } = data;\n\n  return `<img src='${url}' alt=\"${text}\"></img>`;\n};\n\nexport default {\n  buildAnchorTag\n};\n","class editorApi {\n  constructor(node) {\n    this.editorNode = node;\n    this.focusNode = null;\n    this.focusNodeOffset = 0;\n  }\n\n  focusEditor() {\n    this.editorNode.focus();\n  }\n\n  removeAllRanges() {\n    this.saveFocusNode();\n    document.getSelection().removeAllRanges();\n    this.focusNodeFn();\n  }\n\n  saveFocusNode() {\n    const node = document.getSelection();\n    this.focusNode = node.focusNode;\n    this.focusNodeOffset = node.focusOffset;\n  }\n\n  getSelection() {\n    return document.getSelection();\n  }\n\n  focusNodeFn() {\n    this.getSelection().setPosition(this.focusNode, this.focusNodeOffset);\n    this._resetFocusNode();\n  }\n\n  _resetFocusNode() {\n    this.focusNode = null;\n    this.focusNodeOffset = 0;\n  }\n\n  insertCustomTag(componentKey, props = {}) {\n    const replacePlaceholder = props.replacePlaceholder || false;\n    this.insertHTML(props.tag);\n  }\n\n  backColor(color) {\n    this._ec(\"backColor\", false, color);\n  }\n\n  bold() {\n    this._ec(\"bold\", false);\n  }\n\n  addCustomTag(htmlString) {\n    this._ec(\"insertHTML\", false, htmlString);\n  }\n  // copy: -> @_ec(\"copy\", false)\n  // createLink: (uri) -> @_ec(\"createLink\", false, uri)\n  // cut: -> @_ec(\"cut\", false)\n  // decreaseFontSize: -> @_ec(\"decreaseFontSize\", false)\n  // delete: -> @_ec(\"delete\", false)\n  // fontName: (fontName) -> @_ec(\"fontName\", false, fontName)\n  // fontSize: (fontSize) -> @_ec(\"fontSize\", false, fontSize)\n  // foreColor: (color) -> @_ec(\"foreColor\", false, color)\n  // formatBlock: (tagName) -> @_ec(\"formatBlock\", false, tagName)\n  // forwardDelete: -> @_ec(\"forwardDelete\", false)\n  // heading: (tagName) -> @_ec(\"heading\", false, tagName)\n  // hiliteColor: (color) -> @_ec(\"hiliteColor\", false, color)\n  // increaseFontSize: -> @_ec(\"increaseFontSize\", false)\n  // indent: -> @_ec(\"indent\", false)\n  // insertHorizontalRule: -> @_ec(\"insertHorizontalRule\", false)\n\n  insertHTML(html, { selectInsertion } = {}) {\n    this._ec(\"insertHTML\", false, html);\n  }\n\n  // insertImage: (uri) -> @_ec(\"insertImage\", false, uri)\n  // insertOrderedList: -> @_ec(\"insertOrderedList\", false)\n  // insertUnorderedList: -> @_ec(\"insertUnorderedList\", false)\n  // insertParagraph: -> @_ec(\"insertParagraph\", false)\n  // insertText: (text) -> @_ec(\"insertText\", false, text)\n  // italic: -> @_ec(\"italic\", false)\n  // justifyCenter: -> @_ec(\"justifyCenter\", false)\n  // justifyFull: -> @_ec(\"justifyFull\", false)\n  // justifyLeft: -> @_ec(\"justifyLeft\", false)\n  // justifyRight: -> @_ec(\"justifyRight\", false)\n  // outdent: -> @_ec(\"outdent\", false)\n  // paste: -> @_ec(\"paste\", false)\n  // redo: -> @_ec(\"redo\", false)\n  // removeFormat: -> @_ec(\"removeFormat\", false)\n  // selectAll: -> @_ec(\"selectAll\", false)\n  // strikeThrough: -> @_ec(\"strikeThrough\", false)\n  // subscript: -> @_ec(\"subscript\", false)\n  // superscript: -> @_ec(\"superscript\", false)\n  // underline: -> @_ec(\"underline\", false)\n  // undo: -> @_ec(\"undo\", false)\n  // unlink: -> @_ec(\"unlink\", false)\n  // styleWithCSS: (style) -> @_ec(\"styleWithCSS\", false, style)\n\n  // contentReadOnly: -> @_notImplemented()\n  // enableInlineTableEditing: -> @_notImplemented()\n  // enableObjectResizing: -> @_notImplemented()\n  // insertBrOnReturn: -> @_notImplemented()\n  // useCSS: -> @_notImplemented()\n  _ec(...args) {\n    document.execCommand(...args);\n    return this;\n  }\n  _notImplemented() {\n    throw new Error(\"Not implemented\");\n  }\n}\n\nexport default editorApi;\n"],"sourceRoot":""}