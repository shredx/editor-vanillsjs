{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/editor/editor.js","webpack:///./src/editor/toolbar.js","webpack:///./src/index.js","webpack:///./src/index.scss","webpack:///./src/plugins sync ^\\.\\/.*$","webpack:///./src/plugins/drop.js","webpack:///./src/plugins/emoji-transform-editor-plugin.js","webpack:///./src/plugins/inline-image-upload-plugin.js","webpack:///./src/plugins/registry.js","webpack:///./src/plugins/selection.js","webpack:///./src/store/editor-store.js","webpack:///./src/store/events.js","webpack:///./src/utils/dom.js"],"names":["Editor","editorNode","config","mutationList","observer","console","log","forEach","mutation","type","data","Object","keys","registry","pluginKey","path","pl","require","push","e","node","eventsAndCbs","event","global","document","addEventListener","name","handler","dispatchEvent","methods","onChange","restoreSelection","currentSelection","window","getSelection","sel","getRangeAt","rangeCount","selection","createRange","range","removeAllRanges","addRange","select","method","args","runPlugins","_plugins","plugin","_editor","editorApi","getPlugins","_toolbar","toolbar","toolbarOptions","get","_observer","MutationObserver","_mutationOberserverCb","observe","childList","attributes","subtree","mount","events","subscribe","parentNode","createElement","classList","add","contentEditableNode","contentEditable","onInputChange","_attachEvents","options","func","status","opt","item","image","className","innerHTML","join","srcElement","dataset","callback","appendChild","editorRef","_editorNode","bold","focusEditor","centerAlign","justifyCenter","rightAlign","justifyRight","leftAlign","justifyLeft","attachment","getElementById","editor","value","dropEditorPlugin","stopPropagation","preventDefault","emojiTransformEditorPlugin","dom","inlineImageUploadPlugin","files","dataTransfer","length","content","reader","FileReader","onload","addCustomTag","buildAnchorTag","url","target","result","text","readAsDataURL","drop","selectionEditorPlugin","saveSelection","editorStore","topics","hOP","hasOwnProperty","topic","listener","call","index","remove","publish","info","undefined"],"mappings":"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","file":"js/main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import editorApi from \"../utils/editor/editor-api\";\nimport plugins from \"../plugins/registry\";\nimport events from \"../store/events\";\nimport toolbar from \"./toolbar\";\nimport store from \"../store/editor-store\";\nimport registry from \"../plugins/registry\";\n\nclass Editor {\n  constructor(editorNode, config) {\n    this._editor = new editorApi(editorNode);\n    this._plugins = this.getPlugins();\n    // Config for toolbar\n    this._toolbar = new toolbar(editorNode, this._editor);\n    this.toolbarOptions = this._toolbar.get();\n\n    // setup mutation observer\n    this._observer = new MutationObserver(this._mutationOberserverCb);\n    this._observer.observe(editorNode, {\n      childList: true,\n      attributes: true,\n      subtree: true //Omit or set to false to observe only changes to the parent node.\n    });\n\n    // All events are here\n    this.eventsAndCbs = [\n      { name: \"blur\", handler: \"onFocusLost\" },\n      { name: \"selectionchange\", handler: \"onSelect\", global: true },\n      { name: \"focus\", handler: \"onFocus\" },\n      { name: \"keyup\", handler: \"onKeyup\" },\n      { name: \"keydown\", handler: \"onKeydown\" },\n      { name: \"drop\", handler: \"onDrop\" },\n      { name: \"dragover\", handler: \"onDragOver\" }\n    ];\n\n    this.mount(editorNode);\n\n    events.subscribe(\"changed\", () => {\n      console.log(\"content changed\");\n    });\n\n    this.methods = {};\n    this.methods.onChange = config.onChange;\n  }\n\n  _mutationOberserverCb = (mutationList, observer) => {\n    console.log(\"callback\", mutationList);\n    mutationList.forEach(mutation => {\n      switch (mutation.type) {\n        case \"childList\":\n          /* One or more children have been added to and/or removed\n             from the tree; see mutation.addedNodes and\n             mutation.removedNodes */\n          break;\n        case \"attributes\":\n          /* An attribute value changed on the element in\n             mutation.target; the attribute name is in\n             mutation.attributeName and its previous value is in\n             mutation.oldValue */\n          break;\n      }\n    });\n  };\n\n  mount(editorNode) {\n    const parentNode = document.createElement(\"div\");\n    parentNode.classList.add(\"parent\");\n    const contentEditableNode = document.createElement(\"div\");\n    contentEditableNode.classList.add(\"vanillajs-editor\");\n\n    const toolbar = document.createElement(\"div\");\n    toolbar.classList.add(\"editor-toolbar\");\n    contentEditableNode.contentEditable = true;\n\n    contentEditableNode.addEventListener(\"input\", this.onInputChange, false);\n\n    this._attachEvents(contentEditableNode);\n\n    const options = [];\n    for (let func in this.toolbarOptions) {\n      if (this.toolbarOptions[func].status) {\n        const opt = this.toolbarOptions[func];\n        let item = opt.name;\n\n        if (opt.image) {\n          item = `<img src=\"${opt.image}\" data-name=\"${func}\" class=\"${\n            opt.className\n          }\" alt=\"${opt.name}\"/>`;\n        }\n        options.push(`<li data-name=\"${func}\">${item}</li>`);\n      }\n    }\n    toolbar.innerHTML = `<ul style=\"list-style:none\">\n      ${options.join(\"\")}\n    </ul>\n    `;\n\n    toolbar.addEventListener(\n      \"focusout\",\n      event => {\n        console.log(\"clicked blur\", event.srcElement.dataset.name);\n      },\n      false\n    );\n\n    //@TODO remove these events when editor removed from code to stop leakage of memory\n    toolbar.addEventListener(\n      \"click\",\n      event => {\n        //console.log (\"clicked \", event.srcElement.dataset.name);\n        this.toolbarOptions[event.srcElement.dataset.name].callback();\n      },\n      false\n    );\n    parentNode.appendChild(toolbar);\n\n    parentNode.appendChild(contentEditableNode);\n\n    editorNode.appendChild(parentNode);\n  }\n\n  getPlugins = () => {\n    const data = [];\n    Object.keys(registry).forEach(function(pluginKey) {\n      const path = registry[pluginKey];\n      console.log(pluginKey, path);\n\n      try {\n        const pl = require(`../plugins/${path}`).default;\n        if (pl) {\n          data.push(pl);\n        }\n      } catch (e) {\n        // handle error here\n        console.log(e);\n      }\n    });\n\n    return data;\n  };\n\n  _attachEvents = node => {\n    this.eventsAndCbs.forEach(event => {\n      if (event.global) {\n        document.addEventListener(event.name, this[event.handler], false);\n      } else {\n        node.addEventListener(event.name, this[event.handler], false);\n      }\n    });\n  };\n\n  /**\n   * input event is fired when something in an input\n   * or textarea element has changes and it's also fired\n   *  when something has changed in elements with\n   *  contenteditable attribute. Perfect!} value\n   */\n  onInputChange = event => {\n    // run plugins\n    this.dispatchEvent(\"onContentChanged\", event);\n    // call props method\n    this.methods.onChange(event);\n  };\n\n  onFocusLost = e => {\n    this.dispatchEvent(\"onFocusLost\");\n  };\n\n  onFocus = () => {\n    this.restoreSelection(this.currentSelection);\n  };\n\n  onSelect = () => {\n    // implement it\n  };\n\n  onDrop = e => {\n    this.dispatchEvent(\"onDrop\", { event: e });\n  };\n\n  onDragOver = e => {\n    this.dispatchEvent(\"onDragOver\", { event: e });\n  };\n  // move to selection plugin\n  saveSelection = () => {\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        return sel.getRangeAt(0);\n      }\n    } else if (document.selection && document.selection.createRange) {\n      return document.selection.createRange();\n    }\n    return null;\n  };\n\n  // move to selection plugin\n  restoreSelection = range => {\n    if (range) {\n      if (window.getSelection) {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (document.selection && range.select) {\n        range.select();\n      }\n    }\n  };\n\n  dispatchEvent = (method, args) => {\n    this.runPlugins(method, args);\n  };\n\n  // It will run fired methods on all plugins if method exist on them\n  runPlugins = (method, args) => {\n    this._plugins.forEach(plugin => {\n      if (plugin[method]) {\n        plugin[method](this, args);\n      }\n    });\n  };\n}\n\nexport default Editor;\n","class toolbar {\n  constructor(node, editorRef) {\n    this._editorNode = node;\n    this._editor = editorRef;\n  }\n\n  get() {\n    return {\n      bold: {\n        status: true,\n        image: \"assets/icons/bold.svg\",\n        className: \"toolbar-icons\",\n        name: \"B\",\n        callback: () => {\n          this._editor.bold();\n          this._editor.focusEditor();\n        }\n      },\n      centerAlign: {\n        status: true,\n        image: \"assets/icons/center-align.png\",\n        className: \"toolbar-icons\",\n        name: \"CA\",\n        callback: () => {\n          this._editor.justifyCenter();\n          this._editor.focusEditor();\n        }\n      },\n      rightAlign: {\n        status: true,\n        image: \"assets/icons/right-align.svg\",\n        className: \"toolbar-icons\",\n        name: \"RA\",\n        callback: () => {\n          this._editor.justifyRight();\n          this._editor.focusEditor();\n        }\n      },\n      leftAlign: {\n        status: true,\n        image: \"assets/icons/left-align.svg\",\n        className: \"toolbar-icons\",\n        name: \"LA\",\n        callback: () => {\n          this._editor.justifyLeft();\n          this._editor.focusEditor();\n        }\n      },\n      attachment: {\n        status: true,\n        image: \"assets/icons/attachment.svg\",\n        className: \"toolbar-icons\",\n        name: \"AT\",\n        callback: () => {\n          this._editor.justifyLeft();\n          this._editor.focusEditor();\n        }\n      }\n    };\n  }\n}\n\nexport default toolbar;\n","import Editor from \"./editor/editor\";\nimport \"./index.scss\";\n\nconst node = document.getElementById(\"local-editor\");\nconst editor = new Editor(node, {\n  onChange: function(value) {\n    //console.log(value);\n  }\n});\n\n// mount the editor on root node\n","// removed by extract-text-webpack-plugin","var map = {\n\t\"./drop\": \"./src/plugins/drop.js\",\n\t\"./drop.js\": \"./src/plugins/drop.js\",\n\t\"./emoji-transform-editor-plugin\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./emoji-transform-editor-plugin.js\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./inline-image-upload-plugin\": \"./src/plugins/inline-image-upload-plugin.js\",\n\t\"./inline-image-upload-plugin.js\": \"./src/plugins/inline-image-upload-plugin.js\",\n\t\"./registry\": \"./src/plugins/registry.js\",\n\t\"./registry.js\": \"./src/plugins/registry.js\",\n\t\"./selection\": \"./src/plugins/selection.js\",\n\t\"./selection.js\": \"./src/plugins/selection.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/plugins sync recursive ^\\\\.\\\\/.*$\";","class dropEditorPlugin {\n  static onDrop(editor, data = {}) {\n    //kill any default behavior\n    data.event.stopPropagation();\n    data.event.preventDefault();\n    // const files = data.event.dataTransfer.files;\n    // // name, size, type inside of files\n    // console.log(files);\n  }\n\n  static onDragOver() {\n    //console.log(\"drag over\");\n  }\n}\n\nexport default dropEditorPlugin;\n","import editor from \"../editor/editor\";\n\nclass emojiTransformEditorPlugin extends editor {\n  static transformToEmojis(editor, args) {\n    // transform here\n  }\n\n  onContentChanged(editor, event) {\n    // do here\n  }\n}\n\nexport default emojiTransformEditorPlugin;\n","import dom from \"../utils/dom\";\nconsole.log(dom);\nclass inlineImageUploadPlugin {\n  static onDrop(editor, data = {}) {\n    //kill any default behavior\n    data.event.stopPropagation();\n    data.event.preventDefault();\n    const files = data.event.dataTransfer.files;\n\n    // name, size, type inside of files\n    console.log(files);\n    if (files.length === 0) {\n      return;\n    }\n\n    console.log(files[0].content);\n    var reader = new FileReader();\n    reader.onload = function(e) {\n      editor._editor.addCustomTag(\n        dom.buildAnchorTag({\n          url: e.target.result,\n          text: files[0].name\n        })\n      );\n    };\n\n    reader.readAsDataURL(files[0]);\n  }\n\n  static onDragOver() {\n    //buildAnchorTag();\n    //console.log(\"drag over\");\n  }\n}\n\nexport default inlineImageUploadPlugin;\n","export default {\n  emojiTransformEditorPlugin: \"emoji-transform-editor-plugin\",\n  selection: \"selection\",\n  drop: \"drop\",\n  inlineImageUploadPlugin: \"inline-image-upload-plugin\"\n};\n","class selectionEditorPlugin {\n  static onFocusLost(editor, data = {}) {\n    const currentSelection = editor.saveSelection();\n    editor.restoreSelection(currentSelection);\n    // then, you loose focus\n  }\n}\n\nexport default selectionEditorPlugin;\n","class editorStore {\n  constructor() {}\n}\n","const events = (function(){\n  var topics = {};\n  var hOP = topics.hasOwnProperty;\n\n  return {\n    subscribe: function(topic, listener) {\n      // Create the topic's object if not yet created\n      if(!hOP.call(topics, topic)) topics[topic] = [];\n\n      // Add the listener to queue\n      var index = topics[topic].push(listener) -1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: function() {\n          delete topics[topic][index];\n        }\n      };\n    },\n    publish: function(topic, info) {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if(!hOP.call(topics, topic)) return;\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach(function(item) {\n      \t\titem(info != undefined ? info : {});\n      });\n    }\n  };\n})();\n\nexport default events;","const buildAnchorTag = function(data) {\n  const { url, text = \"\", target = \"\" } = data;\n\n  return `<img src='${url}' alt=\"${text}\"></img>`;\n};\n\nexport default {\n  buildAnchorTag\n};\n"],"sourceRoot":""}