{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/editor/editor.js","webpack:///./src/editor/toolbar.js","webpack:///./src/index.js","webpack:///./src/index.scss","webpack:///./src/plugins sync ^\\.\\/.*$","webpack:///./src/plugins/registry.js","webpack:///./src/plugins/selection.js","webpack:///./src/store/editor-store.js","webpack:///./src/store/events.js","webpack:///./src/utils/editor/editor-api.js"],"names":["Editor","editorNode","config","mutationList","observer","console","log","forEach","mutation","type","data","plugin","registry","pl","require","push","e","node","eventsAndCbs","event","global","document","addEventListener","name","handler","dispatchEvent","methods","onChange","restoreSelection","currentSelection","window","getSelection","sel","getRangeAt","rangeCount","selection","createRange","range","removeAllRanges","addRange","select","method","args","runPlugins","_plugins","_editor","editorApi","getPlugins","_toolbar","toolbar","toolbarOptions","get","_observer","MutationObserver","_mutationOberserverCb","observe","childList","attributes","subtree","mount","events","subscribe","parentNode","createElement","classList","add","contentEditableNode","contentEditable","onInputChange","_attachEvents","options","func","status","opt","innerHTML","srcElement","dataset","callback","appendChild","editorRef","_editorNode","bold","image","focusEditor","getElementById","editor","value","emojiTransformEditorPlugin","selectionEditorPlugin","saveSelection","editorStore","topics","hOP","hasOwnProperty","topic","listener","call","index","remove","publish","info","item","undefined","focusNode","focusNodeOffset","focus","saveFocusNode","focusNodeFn","focusOffset","setPosition","_resetFocusNode","componentKey","props","replacePlaceholder","insertHTML","tag","color","_ec","html","selectInsertion","execCommand","Error"],"mappings":"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","file":"js/main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import editorApi from \"../utils/editor/editor-api\";\nimport plugins from \"../plugins/registry\";\nimport events from \"../store/events\";\nimport toolbar from \"./toolbar\";\nimport store from \"../store/editor-store\";\nimport registry from \"../plugins/registry\";\n\nclass Editor {\n  constructor(editorNode, config) {\n    this._editor = new editorApi(editorNode);\n    this._plugins = this.getPlugins();\n    // Config for toolbar\n    this._toolbar = new toolbar(editorNode, this._editor);\n    this.toolbarOptions = this._toolbar.get();\n\n    // setup mutation observer\n    this._observer = new MutationObserver(this._mutationOberserverCb);\n    this._observer.observe(editorNode, {\n      childList: true,\n      attributes: true,\n      subtree: true //Omit or set to false to observe only changes to the parent node.\n    });\n\n    // All events are here\n    this.eventsAndCbs = [\n      { name: \"blur\", handler: \"onFocusLost\" },\n      { name: \"selectionchange\", handler: \"onSelect\", global: true },\n      { name: \"focus\", handler: \"onFocus\" },\n      { name: \"keyup\", handler: \"onKeyup\" },\n      { name: \"keydown\", handler: \"onKeydown\" }\n    ];\n\n    this.mount(editorNode);\n\n    events.subscribe(\"changed\", () => {\n      console.log(\"content changed\");\n    });\n\n    this.methods = {};\n    this.methods.onChange = config.onChange;\n  }\n\n  _mutationOberserverCb = (mutationList, observer) => {\n    console.log(\"callback\", mutationList);\n    mutationList.forEach(mutation => {\n      switch (mutation.type) {\n        case \"childList\":\n          /* One or more children have been added to and/or removed\n             from the tree; see mutation.addedNodes and\n             mutation.removedNodes */\n          break;\n        case \"attributes\":\n          /* An attribute value changed on the element in\n             mutation.target; the attribute name is in\n             mutation.attributeName and its previous value is in\n             mutation.oldValue */\n          break;\n      }\n    });\n  };\n\n  mount(editorNode) {\n    const parentNode = document.createElement(\"div\");\n    parentNode.classList.add(\"parent\");\n    const contentEditableNode = document.createElement(\"div\");\n    contentEditableNode.classList.add(\"vanillajs-editor\");\n\n    const toolbar = document.createElement(\"div\");\n    toolbar.classList.add(\"editor-toolbar\");\n    contentEditableNode.contentEditable = true;\n\n    contentEditableNode.addEventListener(\"input\", this.onInputChange, false);\n\n    this._attachEvents(contentEditableNode);\n\n    const options = [];\n    for (let func in this.toolbarOptions) {\n      if (this.toolbarOptions[func].status) {\n        const opt = this.toolbarOptions[func];\n        options.push(`<li data-name=\"${func}\">${opt.name}</li>`);\n      }\n    }\n    toolbar.innerHTML = `<ul style=\"list-style:none\">\n      ${options}\n    </ul>\n    `;\n\n    toolbar.addEventListener(\n      \"focusout\",\n      event => {\n        console.log(\"clicked blur\", event.srcElement.dataset.name);\n      },\n      false\n    );\n\n    //@TODO remove these events when editor removed from code to stop leakage of memory\n    toolbar.addEventListener(\n      \"click\",\n      event => {\n        //console.log (\"clicked \", event.srcElement.dataset.name);\n        this.toolbarOptions[event.srcElement.dataset.name].callback();\n      },\n      false\n    );\n    parentNode.appendChild(toolbar);\n\n    parentNode.appendChild(contentEditableNode);\n\n    editorNode.appendChild(parentNode);\n  }\n\n  getPlugins = () => {\n    const data = [];\n    for (let plugin in registry) {\n      try {\n        const pl = require(`../plugins/${plugin}`).default;\n        if (pl) {\n          data.push(pl);\n        }\n      } catch (e) {\n        // handle error here\n      }\n    }\n\n    return data;\n  };\n\n  _attachEvents = node => {\n    this.eventsAndCbs.forEach(event => {\n      if (event.global) {\n        document.addEventListener(event.name, this[event.handler], false);\n      } else {\n        node.addEventListener(event.name, this[event.handler], false);\n      }\n    });\n  };\n\n  /**\n   * input event is fired when something in an input\n   * or textarea element has changes and it's also fired\n   *  when something has changed in elements with\n   *  contenteditable attribute. Perfect!} value\n   */\n  onInputChange = event => {\n    // run plugins\n    this.dispatchEvent(\"onContentChanged\", event);\n    // call props method\n    this.methods.onChange(event);\n  };\n\n  onFocusLost = e => {\n    this.dispatchEvent(\"onFocusLost\");\n  };\n\n  onFocus = () => {\n    this.restoreSelection(this.currentSelection);\n  };\n\n  onSelect = () => {\n    // implement it\n  };\n  // move to selection plugin\n  saveSelection = () => {\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        return sel.getRangeAt(0);\n      }\n    } else if (document.selection && document.selection.createRange) {\n      return document.selection.createRange();\n    }\n    return null;\n  };\n\n  // move to selection plugin\n  restoreSelection = range => {\n    if (range) {\n      if (window.getSelection) {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (document.selection && range.select) {\n        range.select();\n      }\n    }\n  };\n\n  dispatchEvent = (method, args) => {\n    this.runPlugins(method, args);\n  };\n\n  // It will run fired methods on all plugins if method exist on them\n  runPlugins = (method, args) => {\n    this._plugins.forEach(plugin => {\n      if (plugin[method]) {\n        plugin[method](this);\n      }\n    });\n  };\n}\n\nexport default Editor;\n","class toolbar {\n  constructor(node, editorRef) {\n    this._editorNode = node;\n    this._editor = editorRef;\n  }\n\n  get() {\n    return {\n      bold: {\n        status: true,\n        image: \"\",\n        name: \"B\",\n        callback: () => {\n          this._editor.bold();\n          this._editor.removeAllRanges();\n          this._editor.focusEditor();\n        }\n      }\n    };\n  }\n}\n\nexport default toolbar;\n","import Editor from \"./editor/editor\";\nimport \"./index.scss\";\n\nconst node = document.getElementById(\"local-editor\");\nconst editor = new Editor(node, {\n  onChange: function(value) {\n    //console.log(value);\n  }\n});\n\n// mount the editor on root node\n","// removed by extract-text-webpack-plugin","var map = {\n\t\"./emoji-transform-editor-plugin\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./emoji-transform-editor-plugin.js\": \"./src/plugins/emoji-transform-editor-plugin.js\",\n\t\"./registry\": \"./src/plugins/registry.js\",\n\t\"./registry.js\": \"./src/plugins/registry.js\",\n\t\"./selection\": \"./src/plugins/selection.js\",\n\t\"./selection.js\": \"./src/plugins/selection.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/plugins sync recursive ^\\\\.\\\\/.*$\";","export default {\n  emojiTransformEditorPlugin: \"emoji-transform-editor-plugin\",\n  selection: \"selection\"\n};\n","class selectionEditorPlugin {\n  static onFocusLost(editor, data = {}) {\n    const currentSelection = editor.saveSelection();\n    editor.restoreSelection(currentSelection);\n    // then, you loose focus\n  }\n}\n\nexport default selectionEditorPlugin;\n","class editorStore {\n  constructor() {}\n}\n","const events = (function(){\n  var topics = {};\n  var hOP = topics.hasOwnProperty;\n\n  return {\n    subscribe: function(topic, listener) {\n      // Create the topic's object if not yet created\n      if(!hOP.call(topics, topic)) topics[topic] = [];\n\n      // Add the listener to queue\n      var index = topics[topic].push(listener) -1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: function() {\n          delete topics[topic][index];\n        }\n      };\n    },\n    publish: function(topic, info) {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if(!hOP.call(topics, topic)) return;\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach(function(item) {\n      \t\titem(info != undefined ? info : {});\n      });\n    }\n  };\n})();\n\nexport default events;","class editorApi {\n  constructor(node) {\n    this.editorNode = node;\n    this.focusNode = null;\n    this.focusNodeOffset = 0;\n  }\n\n  focusEditor() {\n    this.editorNode.focus();\n  }\n\n  removeAllRanges() {\n    this.saveFocusNode();\n    document.getSelection().removeAllRanges();\n    this.focusNodeFn();\n  }\n\n  saveFocusNode() {\n    const node = document.getSelection();\n    this.focusNode = node.focusNode;\n    this.focusNodeOffset = node.focusOffset;\n  }\n\n  getSelection() {\n    return document.getSelection();\n  }\n\n  focusNodeFn() {\n    this.getSelection().setPosition(this.focusNode, this.focusNodeOffset);\n    this._resetFocusNode();\n  }\n\n  _resetFocusNode() {\n    this.focusNode = null;\n    this.focusNodeOffset = 0;\n  }\n\n  insertCustomTag(componentKey, props = {}) {\n    const replacePlaceholder = props.replacePlaceholder || false;\n    this.insertHTML(props.tag);\n  }\n\n  backColor(color) {\n    this._ec(\"backColor\", false, color);\n  }\n\n  bold() {\n    this._ec(\"bold\", false);\n  }\n  // copy: -> @_ec(\"copy\", false)\n  // createLink: (uri) -> @_ec(\"createLink\", false, uri)\n  // cut: -> @_ec(\"cut\", false)\n  // decreaseFontSize: -> @_ec(\"decreaseFontSize\", false)\n  // delete: -> @_ec(\"delete\", false)\n  // fontName: (fontName) -> @_ec(\"fontName\", false, fontName)\n  // fontSize: (fontSize) -> @_ec(\"fontSize\", false, fontSize)\n  // foreColor: (color) -> @_ec(\"foreColor\", false, color)\n  // formatBlock: (tagName) -> @_ec(\"formatBlock\", false, tagName)\n  // forwardDelete: -> @_ec(\"forwardDelete\", false)\n  // heading: (tagName) -> @_ec(\"heading\", false, tagName)\n  // hiliteColor: (color) -> @_ec(\"hiliteColor\", false, color)\n  // increaseFontSize: -> @_ec(\"increaseFontSize\", false)\n  // indent: -> @_ec(\"indent\", false)\n  // insertHorizontalRule: -> @_ec(\"insertHorizontalRule\", false)\n\n  insertHTML(html, { selectInsertion } = {}) {\n    this._ec(\"insertHTML\", false, html);\n  }\n\n  // insertImage: (uri) -> @_ec(\"insertImage\", false, uri)\n  // insertOrderedList: -> @_ec(\"insertOrderedList\", false)\n  // insertUnorderedList: -> @_ec(\"insertUnorderedList\", false)\n  // insertParagraph: -> @_ec(\"insertParagraph\", false)\n  // insertText: (text) -> @_ec(\"insertText\", false, text)\n  // italic: -> @_ec(\"italic\", false)\n  // justifyCenter: -> @_ec(\"justifyCenter\", false)\n  // justifyFull: -> @_ec(\"justifyFull\", false)\n  // justifyLeft: -> @_ec(\"justifyLeft\", false)\n  // justifyRight: -> @_ec(\"justifyRight\", false)\n  // outdent: -> @_ec(\"outdent\", false)\n  // paste: -> @_ec(\"paste\", false)\n  // redo: -> @_ec(\"redo\", false)\n  // removeFormat: -> @_ec(\"removeFormat\", false)\n  // selectAll: -> @_ec(\"selectAll\", false)\n  // strikeThrough: -> @_ec(\"strikeThrough\", false)\n  // subscript: -> @_ec(\"subscript\", false)\n  // superscript: -> @_ec(\"superscript\", false)\n  // underline: -> @_ec(\"underline\", false)\n  // undo: -> @_ec(\"undo\", false)\n  // unlink: -> @_ec(\"unlink\", false)\n  // styleWithCSS: (style) -> @_ec(\"styleWithCSS\", false, style)\n\n  // contentReadOnly: -> @_notImplemented()\n  // enableInlineTableEditing: -> @_notImplemented()\n  // enableObjectResizing: -> @_notImplemented()\n  // insertBrOnReturn: -> @_notImplemented()\n  // useCSS: -> @_notImplemented()\n  _ec(...args) {\n    document.execCommand(...args);\n    return this;\n  }\n  _notImplemented() {\n    throw new Error(\"Not implemented\");\n  }\n}\n\nexport default editorApi;\n"],"sourceRoot":""}